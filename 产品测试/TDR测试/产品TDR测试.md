## TDR测试原理   

TDR测试，又叫Time-Domain Reflectometry，时域反射分析  
原理是当信号通过电阻突变的部分时，会放射一部分信号和源限号相得加，我们根据信号反射的时间和反射的大小可以判断出阻抗不连续点和不连续点阻抗的大小。   

## 信号反射  

反射是信号完整性问题中的一个重要方面，指的是信号在传输线上遇到阻抗不匹配或信号线长度不匹配等的情况下，部分能量被反射回源端，从而影响信号的完整性。在反射产生的情况下，反射波会回到信号源处，与原始信号叠加，导致信号的振幅和波形发生变化。这可能导致信号的峰值振幅降低、波形失真，甚至可能干扰到其他信号或系统的正常工作。 

> 阻抗匹配:阻抗匹配指通过调整输入阻抗和输出阻抗来使得电子器件满足一定条件，通常该条件是使得系统传输功率最大或者使得信号反射最小。  

将电流类比于水流，而将水位的高度看作为电压，这跟我们初高中接触的物理知识是一致的。水流的速度看作是信号的频率，假设，河道中水的宽度为阻抗，那么河道宽阻抗必然越小，这应该很好理解，我们的走线也是一样，走线越宽，阻抗越小。

所以，对于河道，如果水流突然流进了窄道，水道变窄，那么阻抗会增大。这个时候，如果水流速度很快，也就是信号频率很高，那么试想是不是会溅起水花，如下图，这就是反射。而如果，河道由宽到窄，那么小沟中水位想想肯定是会抬高的（去过苏杭的运河游船的应该是很清楚这一点），说明这就产生了正反射，电压变高了。

反之，如果由河道进入了大江，江明显更宽，那么此时阻抗会变小，同时水位也会变低，此时就会产生负阻抗啦，叠加后电压就低了。

通过上面的类比，我们再看下面的就很easy了。

反射就是在传输线上的回波。信号功率(电压和电流)的一部分传输到线上并达到负载处，但是有一部分被反射了，如下图所示。源端与负载端阻抗不匹配会引起线上反射，负载将一部分电压反射回源端。如果负载阻抗小于源阻抗，反射电压为负，反之，如果负载阻抗大于源阻抗，反射电压为正。布线的几何形状、不正确的线端接、经过连接器的传输及电源平面的不连续等因素的变化均会导致此类反射。 

## TDR测试  